#:kivy 1.11.1

#:import os os
#:import pl pathlib
#:import CU src.model.CommonUtils.CommonUtils
#:import toast kivymd.toast.toast

#set primary_color str(app.theme_cls.primary_palette)
#set accent_color str(app.theme_cls.accent_palette)

<MyNavigationDrawerIconButton@NavigationDrawerIconButton>
    # TODO: So you can't do default here?
    #theme_primary_color: ""
    #theme_accent_color: ""

    on_release:
        app.set_theme_toolbar(self.theme_primary_color, self.theme_accent_color)
        app.set_title_toolbar(root.text)
        app.show_screen(root.text)
        toast(root.text)


<ContentNavigationDrawer@MDNavigationDrawer>:

    drawer_logo: str(CU.tfs.dic['IMG_DIR_PATH'].value / "ToneFlow_Logo_Drawer.png")
    #drawer_title: "Menu:"

    NavigationDrawerSubheader:
        text: "Menus:"

    MyNavigationDrawerIconButton:
        icon: "playlist-music"
        text: "Playlists"
        badge_text: "1"
        theme_primary_color: "Red"
        theme_accent_color: "Pink"

    MyNavigationDrawerIconButton:
        icon: "music-note"
        text: "Songs"
        badge_text: "1"
        theme_primary_color: "Yellow"
        theme_accent_color: "DeepOrange"

    NavigationDrawerDivider

    NavigationDrawerSubheader:
        text: "Basics:"

    MyNavigationDrawerIconButton:
        icon: "settings"
        text: "Settings"
        theme_primary_color: "Indigo"
        theme_accent_color: "Blue"

    NavigationDrawerIconButton:
        icon: "power"
        text: "Quit"
        on_release:
            app.on_stop()



NavigationLayout:
    id: nav_layout

    ContentNavigationDrawer:
        id: nav_drawer

    BoxLayout:
        orientation: 'vertical'

        MDToolbar:
            id: toolbar
            title: app.title
            md_bg_color: app.theme_cls.primary_color
            background_palette: 'Primary'
            background_hue: '500'
            elevation: 10
            left_action_items:
                [['menu', lambda x: app.root.toggle_nav_drawer()]]
            right_action_items:
                [['dots-vertical', lambda x: app.root.toggle_nav_drawer()]]

        Widget: