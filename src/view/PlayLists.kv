#:kivy 1.11.1

#:import os os
#:import pl pathlib
#:import CU src.model.CommonUtils.CommonUtils
#:import toast kivymd.toast.toast
#:import ILeftBodyTouch kivymd.uix.list.ILeftBodyTouch
#:import MDIconButton kivymd.uix.button.MDIconButton


<IconLeftSampleWidget@ILeftBodyTouch+MDIconButton>
    icon: root.icon

<PlayListRowView@OneLineIconListItem>:
    icon: 'android'
    on_release: toast(self.text) #root.callback(root.icon)

    IconLeftSampleWidget:
        icon: root.icon

<PLayLists@Screen>
    name: CU.tfs.dic['SCREEN_PLAYLISTS_CLASS'].value.__name__
    on_enter: self.refresh_list()

    BoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(20)

        BoxLayout:
            size_hint_y: None
            height: self.minimum_height

            MDIconButton:
                id: magnifier_button
                icon: 'magnify'
                on_release: root.filter_list()

            #MDTextFieldRound:
                #id: search_field
                #icon_type: 'all'
                #icon_left: 'magnify'
                #icon_left_disabled: False
                #icon_right: 'close'
                #icon_right_disabled: False
                #icon_callback: lambda x,y: print(f"icon fired x: {str(x)}, y: {str(y.id)}")
                #on_text: root.filter_list(self.text)
                #password: False
                #hint_text: "Search playlists"
                #helper_text: "Enter a small snippet of the name of the intended playlist"
                #helper_text_mode: "on_focus"

            MDTextField:
                id: search_field
                hint_text: "Search playlists"
                color_mode: "primary" #"primary", options=["primary", "accent", "custom"]
                on_text: root.filter_list()
                helper_text: "Enter a small snippet of the name of the intended playlist"
                helper_text_mode: "on_focus"

            MDIconButton:
                id: close_button
                icon: 'close'
                on_release: root.clear_search_pattern()

        MDScrollViewRefreshLayout:
            id: refresh_layout
            refresh_callback: root.refresh_list
            root_layout: app.main_widget.ids.float_box

            RecycleView:
                id: rv
                key_viewclass: 'viewclass'
                key_size: 'height'

                RecycleBoxLayout:
                    padding: dp(10)
                    default_size: None, dp(48)
                    default_size_hint: 1, None
                    size_hint_y: None
                    height: self.minimum_height
                    orientation: 'vertical'

    MDFloatingActionButton:
        id: button_add_playlist
        icon: 'plus'
        opposite_colors: True
        elevation_normal: 8
        md_bg_color: app.theme_cls.primary_color
        text_color: self.theme_cls.opposite_text_color
        x: Window.width - self.width - dp(25)
        y: dp(25)
        on_release: root.show_dialog_add_playlist()

        #RecycleView:
        #    id: rv
         #   key_viewclass: 'viewclass'
          #  key_size: 'height'

           # RecycleBoxLayout:
            #    padding: dp(10)
             #   default_size: None, dp(48)
              #  default_size_hint: 1, None
               # size_hint_y: None
                #height: self.minimum_height
                #orientation: 'vertical'
