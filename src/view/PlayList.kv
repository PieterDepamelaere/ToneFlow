#:kivy 1.11.1

#:import os os
#:import pl pathlib
#:import CU src.model.CommonUtils.CommonUtils
#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import toast kivymd.toast.toast
#:import ILeftBodyTouch kivymd.uix.list.ILeftBodyTouch
#:import MDIconButton kivymd.uix.button.MDIconButton
#:import text_colors kivymd.color_definitions.text_colors
#:import colors kivymd.color_definitions.colors

<LineupEntryRowView@OneLineIconListItem>:
    icon: 'music-note' # One can code an if-statement after this
    #list_obj: None
    #playlist_obj: None
    #on_release: self.list_obj.show_modal_view_playlist(self.playlist_obj)
    #txt: '' if self.playlist_obj is None else self.playlist_obj.file_path.stem

    BoxLayout:
        orientation: 'horizontal'
        #size_hint_y: None
        #height: '56'
        spacing: '5dp'
        pos_hint: {'center_y': 0.5}

        MDIconButton:
            icon: root.icon
            on_release: root.list_obj.show_modal_view_playlist(root.playlist_obj)

        Widget:

        MDIconButton:
            icon: 'pencil'
            #theme_text_color: 'Custom'
            #text_color: app.theme_cls.primary_color
            on_release: root.list_obj.show_dialog_rename_playlist(root)

        MDIconButton:
            icon: 'trash-can'
            #theme_text_color: 'Custom'
            #text_color: app.theme_cls.primary_color
            on_release: root.list_obj.show_dialog_remove_playlist(root)

<PlayList>
    BoxLayout:
        orientation:'vertical'

        id: id_playlist
        name: CU.tfs.dic['SCREEN_PLAYLIST_CLASS'].value.__name__
        toolbar_title: CU.tfs.dic['SCREEN_PLAYLIST_CLASS'].name

        on_enter:
            #self.refresh_list()
            # Override needed overscroll to refresh the screen to the bare minimum:
            #refresh_layout.effect_cls.min_scroll_to_reload = -dp(1)

        # The canvas ensures the white background
        canvas:
            Clear:
            Color:
                rgba: 	app.theme_cls.bg_light
            Rectangle:
                size: 	self.size
                pos: 	self.pos

        BoxLayout:
            orientation: 'vertical'
            #halign: "center"
            spacing: dp(10)
            padding: dp(20)

            MDToolbar:
                playlist_name: '<Title Not Available>'
                # if (root is None or root.file_path is None) else root.file_path.stem
                id: toolbar
                type: 'top'
                #mode: 'center'
                #title: f'{root.toolbar_title}: {self.playlist_name}'
                md_bg_color: get_color_from_hex(colors['DeepPurple']['A400'])
        #        background_palette: 'DeepPurple'
        #        background_hue: 'A400'
        #        left_action_items: [['arrow-left', lambda x: toast(f"x")]]
        #        right_action_items: [['lock', lambda x: toast(f"x")],\
        #            ['camera', lambda x: toast(f"x")],\
        #            ['play', lambda x: toast(f"x")]]


            ScrollView:
                do_scroll_x: False
                size_hint: 1, 1

                MDList:
                    id: ml

                    MDTextField:
                        id: search_field
                        hint_text: 'This is a test'

                    #OneLineIconListItem:
                    #    text: "Song 1"
                    #    IconLeftSampleWidget:
                    #        id: li_icon_1
                    #        icon: 'music-note'

                    #TwoLineIconListItem:
                    #    text: "Image"
                    #    secondary_text: "Image Entry"
                    #    IconLeftSampleWidget:
                    #        id: li_icon_2
                    #        icon: 'image'

    #            MDIconButton:
    #                id: magnifier_button
    #                icon: 'magnify'
                    #on_release: root.filter_list()

    #            MDTextField:
    #                id: search_field
    #                hint_text: 'Search playlist'
    #                color_mode: 'primary' #'primary', options=['primary', 'accent', 'custom']
                    #on_text: root.filter_list()
    #                helper_text: 'Enter a small snippet of the name of the intended playlist'
    #                helper_text_mode: 'on_focus'

    #            MDIconButton:
    #                id: close_button
    #                icon: 'close'
                    #on_release: root.clear_search_pattern()


    #        MDScrollViewRefreshLayout:
    #            id: refresh_layout
    #            refresh_callback: root.refresh_list
    #            root_layout: app.main_widget.ids.float_box
    #
    #            RecycleView:
    #                id: rv
    #                key_viewclass: 'viewclass'
    #                key_size: 'height'
    #
    #                #SelectableRecycleBoxLayout:
    #                 #   default_size: None, dp(56)
    #                  #  default_size_hint: 1, None
    #                   # size_hint_y: None
    #                    #height: self.minimum_height
    #                    #orientation: 'vertical'
    #                    #multiselect: True
    #                    #touch_multiselect: True
    #
    #                RecycleBoxLayout:
    #                    padding: dp(10)
    #                    default_size: None, dp(48)
    #                    default_size_hint: 1, None
    #                    size_hint_y: None
    #                    height: self.minimum_height
    #                    orientation: 'vertical'

    #    MDFloatingActionButton:
    #        id: floating_action_button
    #        icon: 'plus'
    #        elevation_normal: 8
    #        x: Window.width - self.width - dp(25)
    #        y: dp(25)
    #        md_bg_color: app.theme_cls.primary_color
    #        specific_text_color: get_color_from_hex(text_colors[app.theme_cls.primary_palette][CU.tfs.dic['THEME_BACKGROUND_HUE'].value])
    #        on_release: root.show_dialog_add_playlist()